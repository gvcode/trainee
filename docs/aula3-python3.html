<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Livro Quarto do curso de trainee da GVCode">

<title>3&nbsp; Introdução ao Python III – GVCode Trainee</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./aula4-cd-manipulacao.html" rel="next">
<link href="./aula2-python2.html" rel="prev">
<link href="./assets/icon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="assets/style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./aula3-python3.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao Python III</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/icon.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">GVCode Trainee</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/gvcode/trainee" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bem Vindos!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula1-python1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução ao Python I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula2-python2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introdução ao Python II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula3-python3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao Python III</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula4-cd-manipulacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">CD: Manipulação</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula5-cd-visualizacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">CD: Visualização</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula6-cd-modelagem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">CD: Modelagem</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aula7-cd-projetos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">CD: Projetos</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introdução" id="toc-introdução" class="nav-link active" data-scroll-target="#introdução"><span class="header-section-number">3.1</span> Introdução</a></li>
  <li><a href="#vetores-e-dataframes" id="toc-vetores-e-dataframes" class="nav-link" data-scroll-target="#vetores-e-dataframes"><span class="header-section-number">3.2</span> Vetores e Dataframes</a>
  <ul class="collapse">
  <li><a href="#vetores" id="toc-vetores" class="nav-link" data-scroll-target="#vetores"><span class="header-section-number">3.2.1</span> Vetores</a></li>
  <li><a href="#dataframes" id="toc-dataframes" class="nav-link" data-scroll-target="#dataframes"><span class="header-section-number">3.2.2</span> Dataframes</a></li>
  </ul></li>
  <li><a href="#numpy" id="toc-numpy" class="nav-link" data-scroll-target="#numpy"><span class="header-section-number">3.3</span> Numpy</a>
  <ul class="collapse">
  <li><a href="#criação-e-características" id="toc-criação-e-características" class="nav-link" data-scroll-target="#criação-e-características"><span class="header-section-number">3.3.1</span> Criação e Características</a></li>
  <li><a href="#tipos-de-arrays" id="toc-tipos-de-arrays" class="nav-link" data-scroll-target="#tipos-de-arrays"><span class="header-section-number">3.3.2</span> Tipos de arrays</a></li>
  <li><a href="#operações-vetorizadas" id="toc-operações-vetorizadas" class="nav-link" data-scroll-target="#operações-vetorizadas"><span class="header-section-number">3.3.3</span> Operações Vetorizadas</a></li>
  <li><a href="#subset" id="toc-subset" class="nav-link" data-scroll-target="#subset"><span class="header-section-number">3.3.4</span> Subset</a></li>
  <li><a href="#repeated-operations" id="toc-repeated-operations" class="nav-link" data-scroll-target="#repeated-operations"><span class="header-section-number">3.3.5</span> Repeated Operations</a></li>
  </ul></li>
  <li><a href="#pandas" id="toc-pandas" class="nav-link" data-scroll-target="#pandas"><span class="header-section-number">3.4</span> Pandas</a>
  <ul class="collapse">
  <li><a href="#criação-e-características-1" id="toc-criação-e-características-1" class="nav-link" data-scroll-target="#criação-e-características-1"><span class="header-section-number">3.4.1</span> Criação e Características</a></li>
  <li><a href="#subset-1" id="toc-subset-1" class="nav-link" data-scroll-target="#subset-1"><span class="header-section-number">3.4.2</span> Subset</a></li>
  <li><a href="#operatecreate" id="toc-operatecreate" class="nav-link" data-scroll-target="#operatecreate"><span class="header-section-number">3.4.3</span> Operate/Create</a></li>
  <li><a href="#de-colunas-1" id="toc-de-colunas-1" class="nav-link" data-scroll-target="#de-colunas-1"><span class="header-section-number">3.4.4</span> De Colunas</a></li>
  <li><a href="#reorder" id="toc-reorder" class="nav-link" data-scroll-target="#reorder"><span class="header-section-number">3.4.5</span> Reorder</a></li>
  <li><a href="#rename" id="toc-rename" class="nav-link" data-scroll-target="#rename"><span class="header-section-number">3.4.6</span> Rename</a></li>
  <li><a href="#repeated-operations-1" id="toc-repeated-operations-1" class="nav-link" data-scroll-target="#repeated-operations-1"><span class="header-section-number">3.4.7</span> Repeated Operations</a></li>
  </ul></li>
  <li><a href="#criando-um-dataframe-de-exemplo" id="toc-criando-um-dataframe-de-exemplo" class="nav-link" data-scroll-target="#criando-um-dataframe-de-exemplo"><span class="header-section-number">4</span> Criando um DataFrame de exemplo</a></li>
  <li><a href="#função-para-aumentar-valores-em-10" id="toc-função-para-aumentar-valores-em-10" class="nav-link" data-scroll-target="#função-para-aumentar-valores-em-10"><span class="header-section-number">5</span> Função para aumentar valores em 10%</a></li>
  <li><a href="#aplicando-a-função-em-várias-colunas" id="toc-aplicando-a-função-em-várias-colunas" class="nav-link" data-scroll-target="#aplicando-a-função-em-várias-colunas"><span class="header-section-number">6</span> Aplicando a função em várias colunas</a>
  <ul class="collapse">
  <li><a href="#extras" id="toc-extras" class="nav-link" data-scroll-target="#extras"><span class="header-section-number">6.1</span> Extras</a>
  <ul class="collapse">
  <li><a href="#numpy-criação-de-vetores" id="toc-numpy-criação-de-vetores" class="nav-link" data-scroll-target="#numpy-criação-de-vetores"><span class="header-section-number">6.1.1</span> NumPy: Criação de Vetores</a></li>
  <li><a href="#numpy-mais-sobre-tipos" id="toc-numpy-mais-sobre-tipos" class="nav-link" data-scroll-target="#numpy-mais-sobre-tipos"><span class="header-section-number">6.1.2</span> Numpy: Mais Sobre Tipos</a></li>
  <li><a href="#numpy-operações-vetorizadas" id="toc-numpy-operações-vetorizadas" class="nav-link" data-scroll-target="#numpy-operações-vetorizadas"><span class="header-section-number">6.1.3</span> Numpy: Operações Vetorizadas</a></li>
  <li><a href="#numpy-outros-tipos-de-operações" id="toc-numpy-outros-tipos-de-operações" class="nav-link" data-scroll-target="#numpy-outros-tipos-de-operações"><span class="header-section-number">6.1.4</span> Numpy: Outros Tipos de Operações</a></li>
  <li><a href="#numpy-funções-universais" id="toc-numpy-funções-universais" class="nav-link" data-scroll-target="#numpy-funções-universais"><span class="header-section-number">6.1.5</span> Numpy: Funções Universais</a></li>
  <li><a href="#pandas-outros-tipos-de-operações" id="toc-pandas-outros-tipos-de-operações" class="nav-link" data-scroll-target="#pandas-outros-tipos-de-operações"><span class="header-section-number">6.1.6</span> Pandas: Outros Tipos de Operações</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introdução ao Python III</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introdução" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="introdução"><span class="header-section-number">3.1</span> Introdução</h2>
<p>Até agora vimos sobre como estruturar códigos e escrever de forma que o computador entenda (aula 1) e os princípios básicos de como a linguagem Pyhton foi pensada (aula 2). Aqui nessa aula nos concentraremos nas bibliotecas NumPy e Pandas. Elas oferecem ferramentas poderosas para manipulação e análise de dados, respectivamente.</p>
<p>A partir da biblioteca NumPy aprenderemos como manipular dados de forma que cálculos sejam mais fáceis de serem resolvidos - tudo por meio de arrays multidimensionais e funções otimizadas. Já a partir da biblioteca Pandas analisaremos dados de tabelas e planilhas - veremos as funções para manipular, filtrar, agrupar e resumir esses tipos de dados.</p>
<p>A forma como veremos esses tipos de dados são duas. Os vetores e os dataframes (e como utilizá-los) é a primeira forma, e essas funções separadas pelos “tipos de operações”, a segunda.</p>
<p>Entendendo a lógica por trás do ferramental que estamos vendo até aqui nas aulas, vai ficar mais fácil pegar o big picture de tudo do trainee e os próximos conteúdos que vocês aprenderão após essa introudção ao Python.</p>
<!--Ao longo da aula: adicionar mais referências, especialmente sobre onde expandir os conhecimentos sobre cada tema (VOU TIRAR ESSE LEMBRETE QUANDO ACABAR ESSA AULA)-->
</section>
<section id="vetores-e-dataframes" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="vetores-e-dataframes"><span class="header-section-number">3.2</span> Vetores e Dataframes</h2>
<!--Motivar teoricamente porque estamos interessados em aprender outros tipos de (coleções de) dados, além da lista. O texto abaixo está interessante, mas pode não estar tão didático-->
<p>Como fazemos uma sucessão de adição (multiplicação) ou subtração (divisão) em Pyhton?</p>
<p>Qual poderia ser a forma de multiplicação (ex. de pedaços de pizza):</p>
<p>p = [2/8, 3/8, 5/8] # 1) Fazemos uma lista (de pedaços de pizza) e colocamos que ela é igual a p. Colocamos esse “igual” com o intuito de nomearmos um conjunto, no caso uma lista, para escrevermos mais facilmente os próximos comandos envolvendo a lista. print(p * 2) # 2a) Esse print irá multiplicar os números da lista, mas não entre si.</p>
<p>Qual é de fato uma forma possível para uma quantidade pequena de termos:</p>
<p>p = [2/8, 3/8, 5/8] # 1) Fazemos uma lista e colocamos que ela é igual a l1. Colocamos esse “igual” com o intuito de nomearmos um conjunto, no caso uma lista, para escrevermos mais facilmente os próximos comandos da lista.</p>
<p>print([i * 2 for i in p]) # 2b) Com esse print iremos multiplicar cada termo da lista por dois, pois colocamos um loop para transformarmos a nossa coleção. (A transformação é multiplicar cada número da lista/coleção por dois.)</p>
<p>Qual poderia ser a forma de divisão (ex. de conversão de alturas de centímetros em metros):</p>
<p>a1 = [170, 185, 200] # 1) Fazemos uma lista (alturas fictícias) e colocamos que ela é igual a “a”. Colocamos esse “igual” com o intuito de nomearmos um conjunto, no caso uma lista, para escrevermos mais facilmente os próximos comandos envolvendo a lista.</p>
<p>print(a1 / 100) # 2a) Esse print deveria multiplicar os números da lista, mas não entre si. Mas não é possível fazer assim em Pyhton.</p>
<p>Qual é de fato uma forma possível para uma quantidade pequena de termos:</p>
<p>a1 = [170, 185, 200] # 1) Fazemos uma lista e colocamos que ela é igual a l1. Colocamos esse “igual” com o intuito de nomearmos um conjunto, no caso uma lista, para escrevermos mais facilmente os próximos comandos da lista. print([i / 100 for i in a1]) # 2b) Com esse print iremos dividir cada termo da lista por dois, pois colocamos um loop para transformarmos a nossa coleção. (A transformação é dividir cada número da lista/coleção por 100.)</p>
<p>A lista não é multiplicada “termo-a-termo” (como poderíamos querer no primeiro print), que chato… Por que?</p>
<p>Em Pyhton, as listas só são multiplicadas de forma mais complexa do que simplesmente colocando a operação de multiplicação e os números que queremos multiplicar.</p>
<section id="vetores" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="vetores"><span class="header-section-number">3.2.1</span> Vetores</h3>
<p>Vamos ter que considerar um novo tipo de coleção, os <strong>vetores</strong>!</p>
<p>A palavra vetor tem várias definições diferentes, nesta aula, em termos simplistas (!!), pensem em um vetor como uma coleção <strong>homogênea</strong> de dados.</p>
<p>Note que, para ser homogênea, todos os elementos devem ser do mesmo tipo. Tendo essa restrição, conseguimos aplicar <strong>operações vetorizadas</strong>, termo-a-termo, muito mais rápidas que usando um loop/comprehension.</p>
<p>Ou seja, podemos usar, como melhor método o loop/list comprehension apenas em arays como esses: `[1, “a”, 3, (1, 2)]. Assim, é possível uma operação termo-a-termo sem ser homogênea, mas com o prejuízo de que essa operação será computada mais devagar do que se as operações fossem feitas em duas partes, separandos os termos para que cada parte fosse homogênea.</p>
<p>Note que vetores não podem conter vetores (pois estes tem o tipo “array”). Ainda assim, vetores podem ser multi-dimensionais. Pense que são coleções meramente organizadas em linhas/colunas.</p>
<p>Vamos conversar mais sobre vetores em breve.</p>
<section id="exemplos" class="level4" data-number="3.2.1.1">
<h4 data-number="3.2.1.1" class="anchored" data-anchor-id="exemplos"><span class="header-section-number">3.2.1.1</span> Exemplos</h4>
<p>Veja exemplos abaixo, e se poderão ou não ser entendidos como arrays:</p>
<ul>
<li><code>[1]</code> poderá.</li>
<li><code>[1, 2]</code> poderá.</li>
<li><code>[1, "a"]</code> não poderá, tem elementos de tipos diferentes.</li>
<li><code>[1, [1, 2]]</code> não poderá, tem elementos de tipos diferentes (inteiro e uma coleção).</li>
</ul>
<p>Alguns exemplos mais complexos:</p>
<ul>
<li><code>[[1, 2], [3, 4]]</code> poderá! Arrays podem “conter si mesmos”, mas, especialmente, entenda isso como arrays podem ser “organizados em múltiplas dimensões”. No caso, seria um array bidimensional, uma matriz com linhas e colunas.</li>
<li><code>[[1, 2], [3, 4, 5]]</code> não poderá! Essa é outra novidade, os arrays devem ser “retangulares”, dentro de cada dimensão, todos os elementos devem ter o mesmo tamanho. Isso ficará mais claro a diante.</li>
<li>E <code>[[1, 2], [3, "a"]]</code>? Não poderá. Tudo dentro de um array tem que ter o mesmo tipo. Também podemos pensar que, dentro de uma dimensão, tudo deve poder ser entendido como um array.</li>
</ul>
<p>Ok, então, um array é um caso específico de uma lista, é uma lista com duas restrições:</p>
<ul>
<li>Todos os elementos devem ter o mesmo “tipo”.</li>
<li>Deve ser retangulares.</li>
</ul>
</section>
<section id="utilidade-dos-vetores" class="level4" data-number="3.2.1.2">
<h4 data-number="3.2.1.2" class="anchored" data-anchor-id="utilidade-dos-vetores"><span class="header-section-number">3.2.1.2</span> Utilidade dos Vetores</h4>
<p>Por que isso é útil? O que ganhamos com essa perda de generalização?</p>
<p>Na vida real, muitas vezes nos deparamos com esse tipo de dado. Em bases de dado, normalmente cada coluna é uma variável, uma coleção de valores de um mesmo tipo. Além disso, são incontáveis os lugares onde matrizes aparecem, e não apenas as bidimensionais.</p>
<p>Criar um framework que seja especializado nesses casos gera três benefícios principais:</p>
<ul>
<li>O clássico trade-off especialização-qualificação, o numpy é <strong>muito</strong> eficiente em realizar operações com esse tipo de dado. E o essa é uma das maiores propagandas que o numpy faz.
<ul>
<li>Inclusive, por trás dos panos, a nível técnico, arrays são objetos bem diferentes de listas.</li>
</ul></li>
<li>A criação de ferramentas especialmente intuitivas e úteis para o contexto.</li>
<li>Facilitação do escopo, fica muito mais simples e intuitivo elencar as ferramentas que queremos ter para trabalhar.
<ul>
<li>Pense em como buscar as ferramentas relevantes para limpar uma base de dados, na documentação dos métodos de listas e bibliotecas math, stat, etc. Versus buscar as ferramentas na documentação do numpy.</li>
</ul></li>
</ul>
</section>
</section>
<section id="dataframes" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="dataframes"><span class="header-section-number">3.2.2</span> Dataframes</h3>
<p>Com o conhecimento de o que são vetores, fica fácil de pensar que é muito comum que o nosso dado de interesse seja um conjunto de vetores.</p>
<p>A palavra dataframe tem várias definições diferentes, nesta aula, em termos simplistas (!!), ela significa uma coleção de vetores (todos do mesmo tamanho).</p>
<p>Também podemos pensar em dataframe como uma estrutura de dados de linhas e colunas, tipo uma planilha do Excel. Ambos têm um dicionário de listas, em que cada lista possui seus próprios nome para identificarmos.</p>
<p>Vamos adquirir o conhecimento aplicado sobre dataframes em breve.</p>
<p>Referências e aprodundamentos iniciais de vetores e dataframes</p>
<p>https://www.w3schools.com/ai/ai_vectors.asp,<br>
https://medium.com/analytics-vidhya/what-is-a-vector-5c86fc2b57c1#:~:text=A%20vector%2C%20in%20programming%2C%20is,are%20used%20for%20storing%20data, https://computersciencewiki.org/index.php/Vector</p>
<p>https://www.databricks.com/glossary/what-are-dataframes, https://medium.com/<span class="citation" data-cites="jscvcds/a-beginners-guide-to-dataframes-with-examples-9aa6bf53fc06">(<a href="#ref-jscvcds/a-beginners-guide-to-dataframes-with-examples-9aa6bf53fc06" role="doc-biblioref"><strong>jscvcds/a-beginners-guide-to-dataframes-with-examples-9aa6bf53fc06?</strong></a>)</span>, https://discovery.cs.illinois.edu/learn/Basics-of-Data-Science-with-Python/Python-for-Data-Science-Introduction-to-DataFrames/</p>
</section>
</section>
<section id="numpy" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="numpy"><span class="header-section-number">3.3</span> Numpy</h2>
<!-- Texto (enxuto, objetivo) sobre características básicas do Numpy -->
<!-- Existem muuuitas funções do Numpy. O material da aula passada está bom, mas organizar as funções nos "tipos de operação" (a estrutura abaixo) facilitará o aprendizado -->
<!-- tem que checar na documentação do numpy se não há outras funções/métodos importantes, que queremos falar sobre. Com certeza, tem funções que mereceriam estar pelo menos linkadas aqui -->
<p>O que é Numpy? De acordo com o <a href="https://numpy.org/doc/stable/index.html">site oficial</a>:</p>
<blockquote class="blockquote">
<p>NumPy é o pacote fundamental para computação científica em Python. É uma biblioteca Python que fornece um objeto array multidimensional, vários objetos derivados (como arrays mascarados e matrizes) e uma variedade de rotinas para operações rápidas em arrays, incluindo matemática, lógica, manipulação de forma, classificação, seleção, E/S. , transformadas discretas de Fourier, álgebra linear básica, operações estatísticas básicas, simulação aleatória e muito mais.</p>
</blockquote>
<blockquote class="blockquote">
<p>Como curiosidade, há outras bibliotecas desse tipo, chamadas de vetores de curiosidade. Essas bibliotecas facilitam a manipulação e cálculo de vetores (arrays) e, por isso, são muito usados na área de ciência de dados. Um outro exemplo de biblioteca semelhante ao NumPy é o Jax, desenvolvido pelo Google.</p>
</blockquote>
<p>Antes de tudo, vamos <a href="https://numpy.org/install/">instalar</a> e carregar a biblioteca:</p>
<div id="cell-14" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Obs: exemplo de eficiência de operações vetorizadas no Numpy:</p>
<div id="cell-16" class="cell" data-outputid="c6f563ff-01dd-463a-bd60-d30910545bf4" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">1000000</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.arange(n) <span class="co">#criação de lista usando a biblioteca NumPy</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>l1 <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(n)) <span class="co">#criação de outra lista usando método padrão de python</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>timeit a1 <span class="op">*</span> <span class="dv">2</span> <span class="co">#tempo para ele executar a operação (a1*2) usando a biblioteca</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>timeit [x <span class="op">*</span> <span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> l1] <span class="co">#tempo de execução sem a biblioteca</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Observe a diferença entre os tempos de execução para realizar a mesma tarefa!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3.9 ms ± 1.08 ms per loop (mean ± std. dev. of 7 runs, 100 loops each)
279 ms ± 73.8 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)</code></pre>
</div>
</div>
<section id="criação-e-características" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="criação-e-características"><span class="header-section-number">3.3.1</span> Criação e Características</h3>
<!-- buscar uma maneira suave de explicar vetores vs matrizes vs arrays -->
<p>Vamos começar vendo a “cara” dos arrays (vetores):</p>
<div id="cell-19" class="cell" data-outputid="b65a89fa-d547-40d1-c401-3435b263be64" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando alguns arrays</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Obs: já fizemos a importação na aba de código anterior.</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Mas na dúvida, escreva a importação.</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>])</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>]])</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>a3 <span class="op">=</span> np.array([[[<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">9</span>], [<span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">3</span>]], [[<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]]])</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> [a1, a2, a3]: <span class="bu">print</span>(a, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Aqui fazemos uma lista com todos os vetores.</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># O texto "\n" é uma sintaxe especial que gera uma linha em branco/vazia</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 1 1] 

[[1 0 1]
 [3 4 1]] 

[[[1 7 9]
  [5 9 3]]

 [[3 2 1]
  [4 5 6]]] 
</code></pre>
</div>
</div>
<!-- salvar na pasta assets/img e colocar aqui na sintaxe de markdown -->
<p><img src="https://www.plus2net.com/python/images/np-dimensions.jpg" width="400"></p>
<p>Note que começamos a “contar” pelo vetor, depois pelas linhas, depois pelas matrizes, etc.</p>
<p>Existem várias maneiras de criar vetores. Listá-los seria muita decoreba, então veja-as em <a href="#numpy-criação-de-vetores">Extras</a>.</p>
<section id="características" class="level4" data-number="3.3.1.1">
<h4 data-number="3.3.1.1" class="anchored" data-anchor-id="características"><span class="header-section-number">3.3.1.1</span> Características</h4>
<ul>
<li><code>TYPE()</code>: Quando aplicada a um array (vetor), retornará: <code>&lt;class 'numpy.ndarray'&gt;</code></li>
<li><code>DTYPE</code>: escrita como <code>vetor.dtype</code>, retorna o tipo dos elementos dos vetores, como <code>int</code>, para números inteiros ou <code>float</code>, para números flutuantes.</li>
<li><code>SHAPE</code>: escrita como <code>vetor.shape</code>, retorna o número de linhas seguido do número de colunas. Resultado: <code>(n linhas, n colunas)</code></li>
<li><code>RANGE</code> ou <code>ARANGE</code>: são métodos para criar arrays dentro de um alcance. O range irá criar uma lista que depois deve ser convertida em um array. Já arange, é um método direto da biblioteca NumPy para criar um array com esse alcance.</li>
</ul>
<div id="cell-23" class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de array criado com range</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando range para criar uma lista de números de 0 a 9</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">10</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertendo a lista em um array NumPy</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>vetor <span class="op">=</span> np.array(lista)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vetor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-24" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de array criado com arrange</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando arange para criar um vetor de números de 0 a 9</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>vetor <span class="op">=</span> np.arange(<span class="dv">10</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vetor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Formatos dos Vetores</li>
</ul>
<ol type="1">
<li>Vetores Linha: são vetores de formato (1, n). Escritos por: <code>vetor = [[1, 2, 3]]</code></li>
<li>Vetores Coluna: são vetores de formato (n, 1). Escritos por: <code>vetor = [[1], [2], [3]]</code></li>
</ol>
<ul>
<li><code>COPY</code>: podemos escrever <code>vetor_cópia = vetor.copy()</code> para criar uma cópia com os mesmos elementos que podemos editar sem alterar os dados do vetor original.</li>
<li><code>TOLIST()</code>: escrevemos <code>lista = vetor.tolist()</code> para transformar o vetor em uma lista com os mesmos elementos.</li>
</ul>
</section>
</section>
<section id="tipos-de-arrays" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="tipos-de-arrays"><span class="header-section-number">3.3.2</span> Tipos de arrays</h3>
<p>Mais cedo, falamos que todos os elementos de um arrays tem sempre o mesmo “tipo”. Em termos simplificados, o nome normalmente associado à “tipo” é <em>dtype</em>.</p>
<p>Um elemento (um “escalar”) pode ter vários tipos, mas os mais comuns são:</p>
<ul>
<li><code>int_</code>: números inteiros (<em>integer</em>).</li>
<li><code>float_</code>: números de ponto flutuante (<em>floating-point</em>). O tipo padrão.</li>
<li><code>bool_</code>: valores booleanos (<code>True</code> ou <code>False</code>).</li>
<li><code>str_</code>: <em>strings</em> de texto.</li>
<li>E outros menos utilizados: <code>complex_</code>: números complexos, <code>object_</code>: objetos Python genéricos, <code>datetime64</code>: datas e horários, <code>timedelta64</code>: diferenças entre datas e horários, <code>category</code>: categorias ou rótulos.</li>
</ul>
<p>Veja alguns comentários técnicos na seção <a href="#mais-sobre-tipos">Mais Sobre Tipos</a>.</p>
<section id="coerção-de-tipos" class="level4" data-number="3.3.2.1">
<h4 data-number="3.3.2.1" class="anchored" data-anchor-id="coerção-de-tipos"><span class="header-section-number">3.3.2.1</span> Coerção de Tipos</h4>
<p>Mas e se eu tentar criar o array <code>[1, "a"]</code>? O numpy usa <em>coerção</em>, ele converte todos os elementos a um mesmo tipo, de acordo com uma lista de prioridade. De maneira simples, <em>int</em> → <em>float</em> → <em>string</em>. Você também pode converter um array para outro tipo usando o método <code>x.astype()</code>. Veja exemplos abaixo.</p>
<div id="cell-29" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="fl">3.0</span>, <span class="dv">4</span>]]), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="fl">3.0</span>, <span class="st">"4.0"</span>]]), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]], dtype <span class="op">=</span> np.complex_), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]]).astype(<span class="bu">str</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="mais-informações" class="level4" data-number="3.3.2.2">
<h4 data-number="3.3.2.2" class="anchored" data-anchor-id="mais-informações"><span class="header-section-number">3.3.2.2</span> Mais Informações</h4>
<p>Para mais informações sobre arrays, como funcionam, como são salvos na memória, veja <a href="https://numpy.org/doc/stable/reference/arrays.html">API Ref. → Array objects</a>. Cuidado, muitos temas técnicos e desnecessários (para o momento).</p>
<p>Especialmente, foram ignorados dois tópicos de arrays:</p>
<ul>
<li>Os <em>masked arrays</em>, arrays com valores faltantes, <a href="https://numpy.org/doc/stable/reference/maskedarray.html">API Ref. → Array objects → Masked arrays</a>.</li>
<li>E os <em>datetime arrays</em>, arrays de datas, <a href="https://numpy.org/doc/stable/reference/arrays.datetime.html">API Ref. → Array objects → Datetimes and Timedeltas</a>.</li>
</ul>
</section>
</section>
<section id="operações-vetorizadas" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="operações-vetorizadas"><span class="header-section-number">3.3.3</span> Operações Vetorizadas</h3>
<p>Lembre-se que o ponto mais importante é a vetorização. O numpy define “funções universais”, funções que podem ser aplicadas de forma vetorizadas.</p>
<p>Listar as funções seria muita decoreba, veja-as em <a href="#numpy-operações-vetorizadas">Extras</a>. Abaixo, explicamos algumas das mais úteis.</p>
<ul>
<li><code>np.subtract(a1, a2)</code> subtrai os núemros de index iguais dos vetores a1 e a2</li>
<li><code>np.divide(a1, a2)</code> divide os números de a1 pelos seus pares de a2</li>
<li><code>np.exp(a1)</code> eleva o número de Euler (2,718) aos números do vetor</li>
<li><code>np.log(a1)</code> retorna o logaritmo natural (log e) de cada elemento da tabela</li>
</ul>
</section>
<section id="subset" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="subset"><span class="header-section-number">3.3.4</span> Subset</h3>
<p>A referência básica está em <a href="https://numpy.org/doc/stable/user/basics.indexing.html">User guide → Indexing on ndarrays</a>.</p>
<p>A indexação de arrays é feita de forma similar à listas, com <code>a1[algo]</code>. A maioria das técnicas disponíveis para listas está disponível aqui também.</p>
<p>Essa parte é bem útil, porque lógicas similares de indexação podem ser utilizadas no pandas e em listas.</p>
<section id="subseting-básico" class="level4" data-number="3.3.4.1">
<h4 data-number="3.3.4.1" class="anchored" data-anchor-id="subseting-básico"><span class="header-section-number">3.3.4.1</span> Subseting Básico</h4>
<p>Com uma dimensão, é simples. Conseguimos utilizar a técnica de indexes negativos.</p>
<div id="cell-34" class="cell" data-outputid="ed5bc6c0-fe41-48d8-f656-034389ef2173" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando indexing em Arrays</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Definindo o array</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>])</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Printando o array e uma linha vazia</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Printando os elementos de index 0 e -1</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="dv">0</span>])</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="op">-</span><span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 2 3 4 5 6 7 8 9] 

1
9</code></pre>
</div>
</div>
<p>E com duas dimensões? Agora, temos que informar o que queremos pegar de cada dimensão, <code>a2[algo1, algo2]</code>:</p>
<div id="cell-36" class="cell" data-outputid="045f0e5f-3816-4fc4-cd3e-0f7458d5765e" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Indexing em matrizes</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando uma matriz 3x3</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], [<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]])</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Printando a matriz e uma linha vazia</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Print do elemento com os index da sua linha e desse elemento dentro da linha</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">0</span>, <span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1 2 3]
 [4 5 6]
 [7 8 9]] 

2</code></pre>
</div>
</div>
<p>E se eu quiser selecionar mais do que um elemento? Aqui, também é possível utilizar a técnica de slicing <code>:</code>.</p>
<div id="cell-38" class="cell" data-outputid="e6e082bb-48f3-48b7-a081-8a2a7ab315f9" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uso de intervalos de index em vetores</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Elementos entre 1 a 3</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="dv">1</span>:<span class="dv">3</span>])</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Elementos a partir do 1</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[<span class="dv">1</span>:])</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Elementos até o 2</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[:<span class="dv">2</span>])</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Elementos do início ao fim</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[:])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2 3]
[2 3 4 5 6 7 8 9]
[1 2]
[1 2 3 4 5 6 7 8 9]</code></pre>
</div>
</div>
<p>Com duas dimensões é a mesma ideia, lembrando que precisamos falar o que queremos pegar de ambas as dimensões, as possibilidades aumentam.</p>
<!-- cuidado pra falar demais sobre isso, não deixar amendrontador demais -->
<div id="cell-40" class="cell" data-outputid="c779f34c-f015-4acb-c1c8-e7d894da2cb0" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Intervalos em Matrizes</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Linha 0, elementos de 0 até 2</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">0</span>, <span class="dv">0</span>:<span class="dv">2</span>])</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Linhas entre 0 até 2, elementos 1</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">0</span>:<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Linhas a partir de 1, elementos do início ao fim</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a2[<span class="dv">1</span>:, :])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 2]
[2 5]
[[4 5 6]
 [7 8 9]]</code></pre>
</div>
</div>
<p>Com <em>n</em> dimensões é a mesma ideia, com uma entrada em <code>[]</code> para cada dimensão.</p>
<p>Se tiver curiosidade, veja dois truques usando <code>...</code> e <code>None</code> nos índices <a href="https://numpy.org/doc/stable/user/basics.indexing.html#dimensional-indexing-tools">aqui</a>.</p>
<div id="cell-42" class="cell" data-outputid="9b07b3e5-279b-45be-f9c3-4a91fa0421bd" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de indexing com n dimensões</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um vetor de alcance 27 (3 ^ 3), e dividindo o em 3 matrizes 3 x 3.</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>a3 <span class="op">=</span> np.arange(<span class="dv">3</span><span class="op">**</span><span class="dv">3</span>).reshape(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibindo o elemento 0, da linha 2 da matriz 2</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a3[<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">0</span>])</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibindo todos os elementos de todas as linhas da matriz 0</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a3[<span class="dv">0</span>, :, :])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>24
[[0 1 2]
 [3 4 5]
 [6 7 8]]</code></pre>
</div>
</div>
<p>Quando você ficar pica, vai descobrir que dá para omitir dimensões, como abaixo. Mas por enquanto, não inventa, coloque um “algo” para cada dimensão, nem que o “algo” seja “selecione tudo” (<code>:</code>).</p>
<div id="cell-44" class="cell" data-outputid="422fe30e-5b73-4f6b-95d4-52aa5e796ad1" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a3[<span class="dv">0</span>:])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[[ 0  1  2]
  [ 3  4  5]
  [ 6  7  8]]

 [[ 9 10 11]
  [12 13 14]
  [15 16 17]]

 [[18 19 20]
  [21 22 23]
  [24 25 26]]]</code></pre>
</div>
</div>
<p>Note que essa noção do subset deixa claro qual é a “ordem” dos componentes de um array multidimensional. Isto é, quando pedimos <code>for i in a3</code>, o que será passado para <code>i</code>? Cada elemento? Cada coluna, cada linha? cada matriz?</p>
<div id="cell-46" class="cell" data-outputid="920e68ca-7095-446f-8d7b-7680cc53c567" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aqui estamos usando loops para cada sub elementos das etapas</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aqui "mat" se refere as matrizes de a3</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mat <span class="kw">in</span> a3:</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aqui "row" seriam as linhas das matrizes</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> row <span class="kw">in</span> mat:</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>      <span class="co"># E aqui os elementos dessas linhas</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> item <span class="kw">in</span> row: <span class="bu">print</span>(item, end <span class="op">=</span> <span class="st">" "</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Pedimos pra printar os elementos, que chamamos de "item"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 </code></pre>
</div>
</div>
<p>Vemos que, do array tridimensional <code>a3</code>, <code>mat</code> são as sub-matrizes, <code>row</code> são as linhas de uma sub-matriz, e <code>item</code> os elementos de cada linha. Isto é, a ordem é da maior/última/mais alta dimensão para a menor/mais baixa.</p>
</section>
<section id="filter" class="level4" data-number="3.3.4.2">
<h4 data-number="3.3.4.2" class="anchored" data-anchor-id="filter"><span class="header-section-number">3.3.4.2</span> Filter</h4>
<p>E se os índices que você quer obter estão em uma coleção? Podemos utilizar coleções de inteiros ou booleanos para acessar índices também!</p>
<div id="cell-49" class="cell" data-outputid="67822f58-63c3-4384-def0-020edfe6a77c" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[np.array([<span class="dv">1</span>, <span class="dv">2</span>])]) <span class="co">#a1[[1, 2]]</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[np.array([<span class="va">True</span>,<span class="va">False</span>,<span class="va">False</span>,<span class="va">True</span>,<span class="va">False</span>,<span class="va">False</span>,<span class="va">False</span>,<span class="va">True</span>,<span class="va">False</span>])])</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># False para aqueles que não queremos e True para aqueles desejados</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2 3]
[1 4 8]</code></pre>
</div>
</div>
<p>Note que para booleanos, o índice-coleção precisa ser do mesmo tamanho da dimensão relevante.</p>
<p>O legal é que dá para utilizar isso para criar <em>filtros</em>:</p>
<div id="cell-51" class="cell" data-outputid="c55d572a-b452-41f0-95fe-37f77ca7496c" data-execution_count="17">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1[a1 <span class="op">+</span> <span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2 3 4 5 6 7 8 9]</code></pre>
</div>
</div>
<p>Existem muitas outras técnicas utilizando essas ferramentas. Veja mais <a href="https://numpy.org/doc/stable/user/basics.indexing.html#advanced-indexing">aqui</a>.</p>
<p>Falamos apenas sobre um tipo de operação, “subset”. Exitem vários outros que valem a pena saber, veja mais em <a href="#numpy-outros-tipos-de-operações">Extras</a>.</p>
</section>
</section>
<section id="repeated-operations" class="level3" data-number="3.3.5">
<h3 data-number="3.3.5" class="anchored" data-anchor-id="repeated-operations"><span class="header-section-number">3.3.5</span> Repeated Operations</h3>
<ul>
<li><code>NP.WHERE</code>: Permite atribuir operações quando certos requisitos são atendidos. Sintaxe: <code>numpy.where(condição, valor_se_verdadeiro, valor_se_falso)</code></li>
</ul>
<div id="cell-56" class="cell" data-outputid="921c942a-ab13-427a-be13-e64fa6bb7836">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de WHERE</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um array de exemplo</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="op">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="op">-</span><span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando np.where() para substituir valores negativos por 0</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> np.where(arr <span class="op">&gt;</span> <span class="dv">0</span>, arr, <span class="dv">0</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 0 3 0 5]</code></pre>
</div>
</div>
<ul>
<li><code>FOR</code>: Método padrão para iterar sobre elementos de listas ou arrays. É em geral mais lento do que <code>np.where</code>. Sintaxe: <code>For x in array operação</code></li>
</ul>
<div id="cell-58" class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemplo de FOR, com a mesma função do exemplo anterior</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um array de exemplo</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="op">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="op">-</span><span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando uma cópia do array para modificar dentro do loop</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> arr.copy()</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Usando um loop for para substituir valores negativos por 0</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(resultado)):</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> resultado[i] <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        resultado[i] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Fim!</strong></p>
<p>Pronto! Vocês aprenderam os primeiros conteúdos de NumPy! Agora, podemos aplicar esse novo jeito de pensar para bases de dados, e conhecer a biblioteca especializada nisso, o Pandas. A partir de agora, pensa sempre sobre os dados vetorizados. Esse conceito é essencial para entender Pandas, uma vez que só assim as funções de manipular, filtrar, agrupar e resumir esses tipos de dados fazem sentido e são programadas.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="data:image/png;base64,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" class="img-fluid figure-img"></p>
<figcaption>Screenshot.png</figcaption>
</figure>
</div>
</section>
</section>
<section id="pandas" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="pandas"><span class="header-section-number">3.4</span> Pandas</h2>
<!-- Texto (enxuto, objetivo) sobre características básicas do Pandas. O texto da aula antiga está grande demais -->
<!-- Existem muuuitas funções do Pandas. O material da aula passada está bom, mas organizar as funções nos "tipos de operação" (a estrutura abaixo) facilitará o aprendizado -->
<!-- tem que checar na documentação do pandas se não há outras funções/métodos importantes, que queremos falar sobre. Com certeza, tem funções que mereceriam estar pelo menos linkadas aqui -->
<div id="cell-62" class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="criação-e-características-1" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="criação-e-características-1"><span class="header-section-number">3.4.1</span> Criação e Características</h3>
<p>import pandas as pd # 1) Esse é sempre o primeiro passo: o de importarmos a biblioteca necessária.</p>
<p>df = pd.read_csv(‘data.csv’) #* 2) Esse é outro passo essencial: o de identificarmos qual é a planilha dos dados que vamos usar. Usaremos esse comando bastante daqui para frente. Mas ele só serve para quando temos aquivos externos.</p>
<p>print(df.to_string()) 3) Aqui nós fazemos a operação inicial mais importante: pedimos para que seja exibido o objeto DataFrame (df) convertido em em uma representação de string, formatada como uma tabela.*</p>
<p>Antes de continuarmos a falar sobre dataframes, temos que ressaltar que o Pandas tem seu próprio objeto de vetor chamado pd.Series, mas que funciona de forma bem parecida do np.arrayde com uma dimensão.</p>
<p>print(pd.Series([4, 7, -5, 3])) # 1) Nesse exemplo nós pedimos para os termos 4, 7, -5 e 3 serem exibidos.</p>
<p>print(pd.Series([4, 7, -5, 3], index=[“d”, “b”, “a”, “c”])) # 2) Nesse exemplo nós definimos que queremos que os mesmos termos do exemplo de cima sejam exibidos com os índices “d”, “b”, “a” e “c”, nessa ordem.</p>
<p>A seguir veremos os métodos shape, types, info, head, tail e dtypes (já vimos eles com NumPy, agora veremos com Pandas, ou seja, manipulando não mais cálculos para serem resolvidos e sim para analisaremos dados de tabelas e planilhas). (Já podemos nos dar um tapinha nas contas e nos sentirmos orgulhosos de quanto vamos aprender até o final dessa aula, sem falar no final das próximas…)</p>
<p>Estamos falando de método mas não custa reforçar o que é: eles são usados para realizar operações em objetos ou acessar suas propriedades. Cada método é uma função que “pertence” a um objeto. Eles são escritos de forma padronizada: com o nome da nome do método + ponto final (.) + identificação da variável. (Desconsidere os sinais de adição quando for escrever o método.)</p>
<p>Adiantando um pouco sobre uso de cada método. Cada um é útil dependendo do contexto. Dados já estruturados em formato de dicionário ou listas (os exemplos iniciais que estamos usando aqui para apresentar Pandas), os métodos diretos são melhores, pois são mais rápidos e identificam poucas coisas por vez.</p>
<p>Já para lermos arquivos que contêm conjuntos de dados maiores e mais complexos, como csv (dados tabulares no geral), é necessário que utilizemos em primeiro lugar um método específico para lê-los, e depois fazermos as devidas personalizações (que veremos nas próximas aulas).</p>
<p>A princípio de tudo vamos fazer três colunas simples: nome, idade e cidade de três pessoas diferentes. Nosso objetivo aqui é conhecer o que é necessário para criá-la.</p>
<div id="cell-69" class="cell" data-outputid="6f845a38-19b1-4538-8b47-d20ec6f00413">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um dicionário com dados</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Nome'</span>: [<span class="st">'Sérgio'</span>, <span class="st">'Michelle'</span>, <span class="st">'Catarina'</span>],</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Idade'</span>: [<span class="dv">20</span>, <span class="dv">35</span>, <span class="dv">45</span>],</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Cidade'</span>: [<span class="st">'São Paulo'</span>, <span class="st">'Rio de Janeiro'</span>, <span class="st">'Belo Horizonte'</span>]</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando o DataFrame</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibindo o DataFrame</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Nome  Idade          Cidade
0    Sérgio     20       São Paulo
1     Luísa     35  Rio de Janeiro
2  Catarina     45  Belo Horizonte</code></pre>
</div>
</div>
</section>
<section id="subset-1" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="subset-1"><span class="header-section-number">3.4.2</span> Subset</h3>
<p>Aqui falaremos sobre como trabalhar com parte ou seleção de um conjunto maior de dados. Primeiro vamos ver os principais comandos para manipular as colunas de uma tabela e depois veremos como fazer o mesmo com linhas. Por último veremos sobre como manipular colunas e linhas juntas. <!-- tentar trazer alguma sanidade para os diferentes métodos de fazer coisas parecidas --> <!-- Exemplo: Quando você ficar pica, vai descobrir que dá para omitir dimensões, como abaixo. Mas por enquanto, não inventa, coloque um "algo" para cada dimensão, nem que o "algo" seja "selecione tudo" (`:`). --></p>
<section id="de-colunas" class="level4" data-number="3.4.2.1">
<h4 data-number="3.4.2.1" class="anchored" data-anchor-id="de-colunas"><span class="header-section-number">3.4.2.1</span> De Colunas</h4>
<p>columns</p>
<p>colunas = df.columns # 1) Aqui nós estamos criando uma varíavel que chamamos de colunas e usando o método .columns acessamos as colunas do nosso DataFrame.</p>
<p>print(colunas) # 2) Aqui pedimos para ser as colunas serem impressas.</p>
<p>key</p>
<p>nomes = df[‘Nome da coluna’]</p>
<p>print(‘nome da coluna’)</p>
<p>Aqui nós criamos uma variável chamada nomes e não especificamos qual é a coluna que queremos acessar. Indicando uma coluna existente, ela aparecerá de output.</p>
<p>.key</p>
<p>Acessa uma coluna (se o nome da coluna não tiver espaços ou caracteres especiais) como um atributo.</p>
<p>A forma de printarmos esta coluna é df.key e print, igual o método key.</p>
<p>A diferença é que este método não pode ser a coluna tiver espaços, caracteres especiais ou começar com um número, por exemplo</p>
<p>key1, key2</p>
<p>subset = df[[‘nome de uma coluna’, ‘nome de outra coluna’]]</p>
<p>print(subset)</p>
<p>Este módulo nos ajuda a selecionar mais de uma coluna por vez, retornando um novo DataFrame.</p>
</section>
<section id="de-linhas" class="level4" data-number="3.4.2.2">
<h4 data-number="3.4.2.2" class="anchored" data-anchor-id="de-linhas"><span class="header-section-number">3.4.2.2</span> De Linhas</h4>
<p>Agora vamos começar a brincar um pouco com nossas colunas (iei!). Nosso objetivo aqui é entender como exibir apenas parte de nosso dados.</p>
<p>shape</p>
<p>df.shape()</p>
<p>print()</p>
<p>Com o método shape nós não precisamos contar o número de linhas e colunas de nossa tabela.Ela conta primeiro as linhas e depois as colunas.</p>
<p>dtype</p>
<p>print(“de Dados de Cada Coluna (dtypes):”, df.dtypes)</p>
<p>Com o método dtype nós descobrimos quais partes de nossa tabela é integer (int) e object.</p>
<p>info</p>
<p>print(“sobre o DataFrame (info):”)</p>
<p>df.info()</p>
<p>Com o método info nós sabemos de forma estrtura o número total de entradas, o tipo de dados de cada coluna e o uso de memória. Ou seja, um resumo do DataFrame.</p>
<p>head</p>
<p>print(“linhas (head):”, df.head(2))</p>
<p>Com o método head nós podemos escolher a quantidade de linhas que aparecem. Importante ressaltar que não escolhemos de qual linha que começa - é sempre da primeira.</p>
<p>sampel</p>
<p>print(“aleatória (sample):”,</p>
<p>df.sample(2))</p>
<p>Com o método sample é escolhido aleatoriamente escolher linha(s) dependendo da quantidade que colocamos.</p>
<p>tail</p>
<p>print(“linhas (tail):”,</p>
<p>df.tail(2))</p>
<p>Com o método tail nós podemos escolher a quantidade de linhas que aparecem. Importante ressaltar que não escolhemos de qual linha que começa - é sempre da última e em ordem decrescente. (Quando não especificamos uma quantidade de linhas, por padrão são 5.)</p>
<p>filter</p>
<p>print(“Colunas filtradas com ‘Nome’:”, filtro_nomes)</p>
<p>print(“filtradas com regex ‘Idade’:”, filtro_salario)</p>
<p>Aqui nós estamos usando dois Dataframes: o primeiro filtra colunas com base em uma expressão, e o segundo filtra colunas com base em uma expressão comum.</p>
<p>Aplicando essa definição temos que: filtro_nomes é um DataFrame resultante de uma operação que filtra nossa coluna chamada “Nome”. Já filtro_salario é um DataFrame que filtra colunas com base em uma expressão regular que, neste caso, busca colunas que correspondem à palavra “Idade” ou um padrão relacionado. Neste caso, só há uma coluna chamada assim.</p>
<p>.query</p>
<p>filtro_idade = df.query(‘Idade &gt; 30’)</p>
<p>Este método filtra os dados de maneira expressiva e legível. Ele suporta operadores como &gt;, &lt;, ==, !=, &amp; (e), | (ou), e ~ (não).</p>
<p>(Ele também suporta expr, inplace e kwargs. As duas primeiras significam a expressão filtrada passa como uma string e se True, modifica o DataFrame original, repsectivamente. Já kwargs vimos nos extras da aula 2. Mas para retomar e simplificando muito [!!!, olhem na aula 2 a explicação completa]: são argumentos adicionais para avaliar a expressão.)</p>
<p>Para finalizar: no nosso exemplo, queremos o filtro de todas as idades maiores do que 30.</p>
</section>
<section id="ambos-juntos" class="level4" data-number="3.4.2.3">
<h4 data-number="3.4.2.3" class="anchored" data-anchor-id="ambos-juntos"><span class="header-section-number">3.4.2.3</span> Ambos Juntos</h4>
<!-- loc, iloc -->
<!-- apenas fazer referencia (linkar) sobre it e iat -->
<p>loc</p>
<p>print(“ e 3 com Nome e Idade:”, resultado_multi)</p>
<p>Este método nos ajuda a acessar e manipular dados de linhas e colunas: apenas uma delas ou ambas.</p>
<p>No nosso exemplo, o resultado são as linhas e colunas que foram selecionadas, ou seja, da 1 a 3.</p>
<p>iloc</p>
<p>resultado_fatiamento = df.iloc[:, 0:2]</p>
<p>print(“as linhas e as colunas Nome e Idade:”, resultado_fatiamento)</p>
<p>Este método nos permite selecionar dados usando os rótulos das linhas e colunas, em vez de suas posições inteiras. Ou seja, manipulamos os índices baseados em zero da nossa tabela.</p>
<p>No nosso exemplo, o que fizemos foi selecionar todas as linhas de um DataFrame e apenas as duas primeiras colunas.</p>
</section>
</section>
<section id="operatecreate" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="operatecreate"><span class="header-section-number">3.4.3</span> Operate/Create</h3>
<!-- criar/deletar/alterar colunas -->
<!-- criar/deletar/alterar linhas -->
<!-- apenas fazer referencia sobre criar/deletar/alterar células -->
<!-- lidar com dados NA -->
</section>
<section id="de-colunas-1" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="de-colunas-1"><span class="header-section-number">3.4.4</span> De Colunas</h3>
<p>Criar</p>
<p>df[‘Salario’] = [50000, 60000, 70000]</p>
<p>print(“DataFrame após adicionar a coluna ‘Salario’:”, df)</p>
<p>Com esse comando inserimos dados novos. Nesse caso, uma coluna de salário.</p>
<p>Deletar</p>
<p>df = df.drop(columns=[‘Salario’])</p>
<p>print(“após deletar a coluna ‘Salario’:”, df)</p>
<p>Com esse comando tiramos alguma coluna. Neste caso, a própria coluna criada anteriomente.</p>
<p>Alterar</p>
<p>df[‘Idade’] = df[‘Idade’] + 5</p>
<p>print(“após alterar a coluna ‘Idade’:”, df)</p>
<p>Este comando só é possivel, pois o Pandas consegue ser usado para calcular operações aritméticas em colunas inteiras. Assim, podemos somar ou subtrair os números de uma coluna de nossa tabela de uma vez.</p>
<section id="de-linhas-1" class="level4" data-number="3.4.4.1">
<h4 data-number="3.4.4.1" class="anchored" data-anchor-id="de-linhas-1"><span class="header-section-number">3.4.4.1</span> De Linhas</h4>
<p>Criar</p>
<p>nova_linha = pd.DataFrame({‘Nome’: [‘Sofia’], ‘Idade’: [35]})</p>
<p>df = pd.concat([df, nova_linha], ignore_index=True)</p>
<p>print(“DataFrame após adicionar a linha de Sofia:”, df)</p>
<p>Este método nos ajuda a concatenar dois ou mais DataFrames. No caso, estamos concatenando o DataFrame original da Sofia com o novo. Mais espeficifamente, estamos criando um novo (primeira linha de código) e desconsiderando a linhas antiga que também se refere a Sofia (segunda linha de código). A nossa alteração específica é em sua idade, podendo ser outro, não espcificamente de número.</p>
<p>Deletar</p>
<p>df = df.drop(index=1)</p>
<p>print(“após deletar a linha de Michelle:”, df)</p>
<p>O argumento index=1 indica que você deseja deletar a linha que possui o índice 1. Os índices em pandas são baseados em zero, então index=1 se refere à segunda linha do DataFrame.</p>
<p>Alterar</p>
<p>df.loc[0, ‘Idade’] = 26</p>
<p>print(“após alterar a idade de Sérgio:”, df)</p>
<p>O primeiro elemento, 0, refere-se ao rótulo da linha que você deseja acessar. Neste caso, isso indica que você está se referindo à linha com o índice 0. O segundo elemento, ‘Idade’, refere-se ao nome da coluna que você deseja alterar. Aqui, você está acessando a coluna chamada ‘Idade’. = 26: esta parte do código atribui o valor 26 à célula que corresponde à linha 0 (a primeira linha) na coluna ‘Idade’. Assim, você está alterando o valor atual dessa célula para 26.</p>
</section>
</section>
<section id="reorder" class="level3" data-number="3.4.5">
<h3 data-number="3.4.5" class="anchored" data-anchor-id="reorder"><span class="header-section-number">3.4.5</span> Reorder</h3>
<!-- mais algo? criar um exemplo mais concreto? -->
<p>Linhas:</p>
<pre><code>df1.sort_values(by='cases', ascending=False)</code></pre>
<p>ascending=False: Este argumento determina a ordem da classificação. Ao definir ascending=False, indicamos que deseja uma ordem decrescente. Isso significa que os valores mais altos na coluna ‘cases’ aparecerão primeiro.</p>
<pre><code>df1.reindex(columns=['year', 'cases', 'population', 'country'])</code></pre>
<p>df1: Este é o DataFrame que você está manipulando. Ele contém dados estruturados em linhas e colunas.</p>
<p>.sort_values(…): Este é um método do pandas que permite ordenar um DataFrame com base nos valores de uma ou mais colunas.</p>
<p>by=‘cases’: Este argumento especifica a coluna pela qual você deseja ordenar o DataFrame. Neste caso, a coluna é chamada ‘cases’. Isso significa que o DataFrame será ordenado com base nos valores presentes nessa coluna.</p>
<p>ascending=False: Este argumento determina a ordem da classificação. Ao definir ascending=False, você está indicando que deseja uma ordem decrescente. Isso significa que os valores mais altos na coluna ‘cases’ aparecerão primeiro.</p>
</section>
<section id="rename" class="level3" data-number="3.4.6">
<h3 data-number="3.4.6" class="anchored" data-anchor-id="rename"><span class="header-section-number">3.4.6</span> Rename</h3>
<!-- mais algo? criar um exemplo mais concreto? -->
<p>Linhas:</p>
<pre><code>df1.rename({0: 'Row1', 1: 'Row2', 2: 'Row3', 3: 'Row4', 4: 'Row5', 5: 'Row6'})</code></pre>
<p>Colunas:</p>
<pre><code>df1.rename(columns={'cases': 'new_cases', 'population': 'new_population'}, inplace=False)</code></pre>
<p>df1: Este é o DataFrame que você está manipulando. Ele contém linhas e colunas com dados.</p>
<p>.rename(…): Este é um método do pandas que permite renomear as linhas ou colunas de um DataFrame. O método retorna uma nova versão do DataFrame com as alterações especificadas.</p>
<p>{0: ‘Row1’, 1: ‘Row2’, …}: Este dicionário especifica as mudanças de nome:</p>
<p>As chaves (0, 1, 2, …) representam os índices originais das linhas do DataFrame. Os valores (‘Row1’, ‘Row2’, …) são os novos nomes que você deseja atribuir a essas linhas.</p>
<p>Assim como na parte de Numpy, alguns tipos de operações mais avançados não foram tratados aqui. Veja-os em <a href="#pandas-outros-tipos-de-operações">Extras</a>. Parte deles serão tratados nas próximas aulas.</p>
</section>
<section id="repeated-operations-1" class="level3" data-number="3.4.7">
<h3 data-number="3.4.7" class="anchored" data-anchor-id="repeated-operations-1"><span class="header-section-number">3.4.7</span> Repeated Operations</h3>
<!-- aplicar uma mesma operação várias colunas, mais algo? -->
<p>import pandas as pd</p>
</section>
</section>
<section id="criando-um-dataframe-de-exemplo" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Criando um DataFrame de exemplo</h1>
<p>data = { ‘Nome’: [‘Aroldo’, ‘Cátia’, ‘Tânia’], ‘Salario’: [50000, 60000, 70000], ‘Bonus’: [5000, 7000, 8000] }</p>
<p>df = pd.DataFrame(data)</p>
<p>print(“DataFrame original:”, df)</p>
</section>
<section id="função-para-aumentar-valores-em-10" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Função para aumentar valores em 10%</h1>
<p>def aumentar_10_porcento(x): return x * 1.1</p>
</section>
<section id="aplicando-a-função-em-várias-colunas" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Aplicando a função em várias colunas</h1>
<p>df[[‘Salario’, ‘Bonus’]] = df[[‘Salario’, ‘Bonus’]].apply(aumentar_10_porcento)</p>
<p>print(“após aumentar Salario e Bonus em 10%:”, df)</p>
<section id="extras" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="extras"><span class="header-section-number">6.1</span> Extras</h2>
<!-- frizar a importancia de estudar as operações do pandas -->
<section id="numpy-criação-de-vetores" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="numpy-criação-de-vetores"><span class="header-section-number">6.1.1</span> NumPy: Criação de Vetores</h3>
<section id="vetores-placeholder" class="level4" data-number="6.1.1.1">
<h4 data-number="6.1.1.1" class="anchored" data-anchor-id="vetores-placeholder"><span class="header-section-number">6.1.1.1</span> Vetores Placeholder</h4>
<p>Também podemos criar arrays com valores comuns, temos várias funções, como:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.empty.html">numpy.empty</a>: cria um array vazio com a forma especificada.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.ones.html">numpy.ones</a>: cria um array preenchido com uns.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html">numpy.zeros</a>: cria um array preenchido com zeros.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.full.html">numpy.full</a>: cria um array preenchido com um valor constante.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.eye.html">numpy.eye</a>: cria uma matriz identidade.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html">numpy.linspace</a>: cria um array com valores espaçados uniformemente dentro de um intervalo.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html">numpy.arange</a>: cria um array com valores espaçados uniformemente dentro de um intervalo especificado.</li>
</ul>
<div id="cell-103" class="cell" data-outputid="22faaa48-8a78-4a72-eb9c-d824bd21fd92">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Empty: </span><span class="ch">\n</span><span class="st">"</span>, np.empty((<span class="dv">2</span>, <span class="dv">3</span>)), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ones: </span><span class="ch">\n</span><span class="st">"</span>, np.ones((<span class="dv">2</span>, <span class="dv">3</span>)), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Zeros: </span><span class="ch">\n</span><span class="st">"</span>, np.zeros((<span class="dv">2</span>, <span class="dv">3</span>)), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Full: </span><span class="ch">\n</span><span class="st">"</span>, np.full((<span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">5</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Eye: </span><span class="ch">\n</span><span class="st">"</span>, np.eye(<span class="dv">3</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Linspace: </span><span class="ch">\n</span><span class="st">"</span>, np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, num<span class="op">=</span><span class="dv">5</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Arange: </span><span class="ch">\n</span><span class="st">"</span>, np.arange(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Empty: 
 [[1.48539705e-313 1.06099790e-313 6.36598738e-314]
 [4.24399158e-314 8.48798316e-314 1.27319747e-313]] 

Ones: 
 [[1. 1. 1.]
 [1. 1. 1.]] 

Zeros: 
 [[0. 0. 0.]
 [0. 0. 0.]] 

Full: 
 [[5 5 5]
 [5 5 5]] 

Eye: 
 [[1. 0. 0.]
 [0. 1. 0.]
 [0. 0. 1.]] 

Linspace: 
 [ 0.   2.5  5.   7.5 10. ] 

Arange: 
 [0 2 4 6 8] 
</code></pre>
</div>
</div>
</section>
<section id="vetores-aleatórios" class="level4" data-number="6.1.1.2">
<h4 data-number="6.1.1.2" class="anchored" data-anchor-id="vetores-aleatórios"><span class="header-section-number">6.1.1.2</span> Vetores Aleatórios</h4>
<p>O numpy tem uma parte da biblioteca focada na geração de números aleatórios, <a href="https://numpy.org/doc/stable/reference/random/index.html">numpy.random</a>. Se tiver curiosidade, leia mais sobre como computadores geram <a href="https://www.revista-programar.info/artigos/pseudorandom-number-generators-prngs/">números pseudo-aleatórios</a>.</p>
<p>Todas as distribuições que você pensar podem ser geradas pelo numpy:</p>
<ul>
<li>Uniforme: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.uniform.html">numpy.random.uniform</a>.
<ul>
<li>Uniforme 0-1: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.random.html">numpy.random.random</a>.</li>
<li>Uniforme discreta A-B: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.integers.html">numpy.random.integers</a>.</li>
</ul></li>
<li>Binomial: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.binomial.html">numpy.random.binomial</a>.</li>
<li>Normal: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.normal.html">numpy.random.normal</a>.</li>
<li>Poisson: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.poisson.html">numpy.random.poisson</a>.</li>
<li>Samplear um array: <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.choice.html">numpy.random.choice</a>.</li>
</ul>
</section>
<section id="vetores-importados" class="level4" data-number="6.1.1.3">
<h4 data-number="6.1.1.3" class="anchored" data-anchor-id="vetores-importados"><span class="header-section-number">6.1.1.3</span> Vetores Importados</h4>
<p>Podemos salvar arrays em arquivos, usando funções como:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.save.html">numpy.save</a>: salva como um “arquivo array” “.npy”.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.savetxt.html">numpy.savetxt</a>: salva como um arquivo CSV, adequado apenas para arrays 1D e 2D.</li>
<li><a href="https://docs.python.org/3/library/pickle.html">A biblioteca pickle</a>: uma bilbioteca que consegue “conservar” qualquer objeto do python, mas pode ser demorado.</li>
</ul>
<p>Similarmente, podemos importar arquivos, com funções <code>numpy.load</code> e <code>numpy.loadtxt</code>.</p>
<p>Por fim, é comum converter outros objetos em arrays. Veja as funções <a href="https://numpy.org/doc/stable/reference/generated/numpy.asarray.html">numpy.asarray</a> e <a href="https://pandas.pydata.org/pandas-docs/version/0.24.0rc1/api/generated/pandas.Series.to_numpy.html">pandas.Series.to_numpy</a>.</p>
<!-- É esse tipo de comentário com referências para mais conteúdo que deve ser criado com mais frequência, e nas outras aulas!! -->
<p>Para mais informação sobre criação de arrays, veja <a href="https://numpy.org/doc/stable/reference/routines.array-creation.html">API Ref. → Routines → Array creation</a>:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#from-shape-or-value">Criando por forma e valor</a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#from-existing-data">Criando por dados</a>, e <a href="https://numpy.org/doc/stable/reference/routines.io.html">API Ref. → Routines → I/O</a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#numerical-ranges">Criando por ranges</a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/routines.array-creation.html#building-matrices">Criando matrizes</a>.</li>
</ul>
</section>
</section>
<section id="numpy-mais-sobre-tipos" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="numpy-mais-sobre-tipos"><span class="header-section-number">6.1.2</span> Numpy: Mais Sobre Tipos</h3>
<p>Como iniciado na parte de dtype() de Pandas, na realidade, embora exista o conceito de “número inteiro”, e o Python só defina um tipo de dado <em>integer</em>, existem muitas maneiras de representar um número na memória do computador. O numpy se importa com isso, e existem vários tipos para cada um dos conceitos acima.</p>
<ul>
<li>Por conta disso, o dtype pode aparecer com nomes diferentes como <em>int64</em>.</li>
<li>Se você for muito nerd, talvez isso importe para o seu projeto. Para escolher um tipo específico use a função <code>np.array</code> com o argumento <code>dtype = ...</code>. Leia mais sobre isso <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#arrays-scalars-built-in">aqui</a>.</li>
<li>O tipo de um array <code>x</code> pode ser descoberto com <code>x.dtype</code> e <code>x.dtype.name</code>.</li>
</ul>
</section>
<section id="numpy-operações-vetorizadas" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="numpy-operações-vetorizadas"><span class="header-section-number">6.1.3</span> Numpy: Operações Vetorizadas</h3>
<section id="operações-aritméticas" class="level4" data-number="6.1.3.1">
<h4 data-number="6.1.3.1" class="anchored" data-anchor-id="operações-aritméticas"><span class="header-section-number">6.1.3.1</span> Operações Aritméticas</h4>
<!-- falar sobre min/max, +*-/, mean/median/var/std, sum/prod, cumsum/cumprod, argmax/argmin, round -->
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.math.html">API Ref. → Routines → Mathematical functions</a>.</p>
<div id="cell-110" class="cell" data-outputid="06d0dd64-1f25-4580-ff33-250b4125217a">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]), np.array([<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>])</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.subtract(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 + a2</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.divide(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 * a2</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.exp(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sqrt(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sin(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.log(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[-3 -3 -3] 

[0.25 0.4  0.5 ] 

[ 2.71828183  7.3890561  20.08553692] 

[1.         1.41421356 1.73205081] 

[0.84147098 0.90929743 0.14112001] 

[0.         0.69314718 1.09861229] 
</code></pre>
</div>
</div>
<p>Também considere as constantes abaixo. Mais informações em <a href="https://numpy.org/doc/stable/reference/constants.html">API Ref. → Constants</a>.</p>
<div id="cell-112" class="cell" data-outputid="d77c69ee-6ad1-42af-d0f8-4ddd6980bf35">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>np.pi, np.e, np.nan, np.inf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="144">
<pre><code>(3.141592653589793, 2.718281828459045, nan, inf)</code></pre>
</div>
</div>
</section>
<section id="operações-matriciais" class="level4" data-number="6.1.3.2">
<h4 data-number="6.1.3.2" class="anchored" data-anchor-id="operações-matriciais"><span class="header-section-number">6.1.3.2</span> Operações Matriciais</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.linalg.html">API Ref. → Routines → Linear algebra</a>.</p>
<div id="cell-114" class="cell" data-outputid="bc1b8c5f-91ee-4391-bfd1-38d28134e6cd">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([(<span class="dv">1</span>,<span class="dv">2</span>), (<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">3</span>)]), np.array([(<span class="dv">4</span>,<span class="dv">5</span>), (<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">6</span>)]) <span class="co"># Note o uso, indiferenciável, de tuplas</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a1 <span class="op">*</span> a2, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.dot(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 @ a2 (produto escalar)</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.matrix_power(a1, <span class="dv">3</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#(potência de matriz)</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.det(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#(determinante)</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.inv(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#(matriz inversa)</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.norm(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#(norma)</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.eig(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#(autovalores e autovertores)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 4 10]
 [ 4 18]] 

[[-4 -7]
 [ 8 13]] 

[[  3  10]
 [ -5 -17]] 

-1.0 

[[ 3.  2.]
 [-1. -1.]] 

3.872983346207417 

EigResult(eigenvalues=array([ 0.41421356, -2.41421356]), eigenvectors=array([[ 0.95968298, -0.50544947],
       [-0.28108464,  0.86285621]])) 
</code></pre>
</div>
</div>
</section>
<section id="operações-com-strings" class="level4" data-number="6.1.3.3">
<h4 data-number="6.1.3.3" class="anchored" data-anchor-id="operações-com-strings"><span class="header-section-number">6.1.3.3</span> Operações com Strings</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.char.html">API Ref. → Routines → String operations</a>.</p>
<div id="cell-116" class="cell" data-outputid="9b3e5281-763e-407b-baac-0ad2ec62e3a2">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([<span class="st">'olá'</span>, <span class="st">'oi'</span>, <span class="st">'oopa'</span>]), np.array([<span class="st">', tudo bem?'</span>, <span class="st">', bem?'</span>, <span class="st">', bão?'</span>])</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.add(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.multiply(a1, [<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>]), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.capitalize(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.count(a1, <span class="st">'o'</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.char.find(a1, <span class="st">'o'</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['olá, tudo bem?' 'oi, bem?' 'oopa, bão?'] 

['oláoláolá' 'oi' 'oopaoopa'] 

['Olá' 'Oi' 'Oopa'] 

[1 1 2] 

[0 0 0] 
</code></pre>
</div>
</div>
</section>
<section id="operações-lógicasde-comparação" class="level4" data-number="6.1.3.4">
<h4 data-number="6.1.3.4" class="anchored" data-anchor-id="operações-lógicasde-comparação"><span class="header-section-number">6.1.3.4</span> Operações Lógicas/de Comparação</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.logic.html">API Ref. → Routines → Logic functions</a>. Também veja operações de sets em <a href="https://numpy.org/doc/stable/reference/routines.set.html">API Ref. → Routines → Set functions</a>.</p>
<div id="cell-118" class="cell" data-outputid="e64b908a-b225-4055-acbb-569242f218af">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>a1, a2 <span class="op">=</span> np.array([(<span class="dv">1</span>,<span class="dv">2</span>), (<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">3</span>)]), np.array([(<span class="dv">4</span>,<span class="dv">5</span>), (<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">6</span>)])</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.greater(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 &gt; a2</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((a1 <span class="op">==</span> a2).<span class="bu">any</span>(), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#note the usage of ()</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.logical_or(a1 <span class="op">&gt;</span> <span class="dv">1</span>, a2 <span class="op">&lt;</span> <span class="dv">0</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>) <span class="co">#a1 &gt; 1 or a2 &lt; 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[False False]
 [ True  True]] 

False 

[[False  True]
 [ True  True]] 
</code></pre>
</div>
</div>
</section>
<section id="operações-estatísticas" class="level4" data-number="6.1.3.5">
<h4 data-number="6.1.3.5" class="anchored" data-anchor-id="operações-estatísticas"><span class="header-section-number">6.1.3.5</span> Operações Estatísticas</h4>
<p>Veja mais em <a href="https://numpy.org/doc/stable/reference/routines.statistics.html">API Ref. → Routines → Statistics</a>.</p>
<div id="cell-120" class="cell" data-outputid="0259b605-1ebc-4602-a79e-5cd69333e5cd">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">100000</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> a1 <span class="op">+</span> np.random.normal(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">100000</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.mean(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.median(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.std(a1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.quantile(a1, <span class="fl">0.25</span>), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.corrcoef(a1, a2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.0014274762281511 

0.0025126008047063083 

0.9979381079716622 

-0.6661109489960002 

[[1.         0.89446592]
 [0.89446592 1.        ]] 
</code></pre>
</div>
</div>
</section>
</section>
<section id="numpy-outros-tipos-de-operações" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="numpy-outros-tipos-de-operações"><span class="header-section-number">6.1.4</span> Numpy: Outros Tipos de Operações</h3>
<section id="operatecreate-1" class="level4" data-number="6.1.4.1">
<h4 data-number="6.1.4.1" class="anchored" data-anchor-id="operatecreate-1"><span class="header-section-number">6.1.4.1</span> Operate/Create</h4>
<p>Veja os funções:</p>
<ul>
<li><code>append()</code>, <code>insert()</code>, e <code>delete()</code>.</li>
</ul>
<!-- criar/deletar/alterar elementos (faltam funções abaixo) -->
</section>
<section id="reorder-1" class="level4" data-number="6.1.4.2">
<h4 data-number="6.1.4.2" class="anchored" data-anchor-id="reorder-1"><span class="header-section-number">6.1.4.2</span> Reorder</h4>
<!-- .arrange, .sort, .argsort -->
</section>
<section id="reshape" class="level4" data-number="6.1.4.3">
<h4 data-number="6.1.4.3" class="anchored" data-anchor-id="reshape"><span class="header-section-number">6.1.4.3</span> Reshape</h4>
<p>Veja as funções/métodos:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.resize.html"><code>.resize()</code></a> e <a href="https://numpy.org/doc/stable/reference/generated/numpy.reshape.html"><code>reshape()</code></a>: para alterar a forma de um array, passando a nova forma como uma tupla.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.transpose.html"><code>transpose()</code></a>: transpor arrays.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flatten.html"><code>.flatten()</code></a> e <a href="https://numpy.org/doc/stable/reference/generated/numpy.ravel.html"><code>.ravel()</code></a>: achatar arrays.</li>
</ul>
</section>
<section id="combine-separate-e-unite" class="level4" data-number="6.1.4.4">
<h4 data-number="6.1.4.4" class="anchored" data-anchor-id="combine-separate-e-unite"><span class="header-section-number">6.1.4.4</span> Combine, Separate e Unite</h4>
<p>Veja as funções:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.concatenate.html"><code>concatenate()</code></a>.</li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.vstack.html"><code>vstack()</code></a>, e <a href="https://numpy.org/doc/stable/reference/generated/numpy.hstack.html"><code>hstack()</code></a>.</li>
</ul>
<p>Em oposição, podemos dividir arrays:</p>
<ul>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.hsplit.html"><code>.hsplit()</code></a> e <a href="https://numpy.org/doc/stable/reference/generated/numpy.vsplit.html"><code>.vsplit()</code></a>.</li>
</ul>
</section>
</section>
<section id="numpy-funções-universais" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="numpy-funções-universais"><span class="header-section-number">6.1.5</span> Numpy: Funções Universais</h3>
<p>Existe um último tópico interessante, mas mais avançado. As funções do numpy são bem poderosas e flexíveis. É possível:</p>
<ul>
<li>Aplicá-las para cada dimensão separadamente – usando o argumento <code>axis=</code>.</li>
<li>Filtrar dimensões para não aplicar – usando o argumento <code>where=</code></li>
<li>Aplicar de modo a “acumular” ou “reduzir” o resultado – usando os métodos <code>.accumulate()</code> e <code>.reduce()</code>.</li>
</ul>
<p>Aprendam sobre esses tópicos em <a href="https://numpy.org/doc/stable/reference/ufuncs.html">Api Ref. ⭢ Universal functions</a>. Adicionalmente, Também vejam algumas táticas avançadas em <a href="https://numpy.org/doc/stable/reference/routines.functional.html">Api Ref. ⭢ Routines ⭢ Functional programming</a>.</p>
<p>Abaixo apresento alguns exemplos sem contexto nenhum.</p>
<div id="cell-127" class="cell" data-outputid="bed44479-0897-4ded-c0a6-a0782049a158">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>np.add.accumulate(a1)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>np.add.<span class="bu">reduce</span>(a1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="149">
<pre><code>6</code></pre>
</div>
</div>
<div id="cell-128" class="cell" data-outputid="afe97abd-9bca-4411-e06f-caf112d2809f">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">4</span>,<span class="dv">5</span>]])</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.accumulate(a2, axis <span class="op">=</span> <span class="dv">0</span>))</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.<span class="bu">reduce</span>(a2, axis <span class="op">=</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1 2]
 [5 7]]
[5 7]</code></pre>
</div>
</div>
<div id="cell-129" class="cell" data-outputid="182882b8-26d9-430a-c949-59c02480abaf">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>where1 <span class="op">=</span> [<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>where2 <span class="op">=</span> [[<span class="va">True</span>, <span class="va">False</span>], [<span class="va">False</span>, <span class="va">True</span>]]</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.<span class="bu">reduce</span>(a1, <span class="dv">0</span>, where <span class="op">=</span> where1), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add.<span class="bu">reduce</span>(a2, <span class="dv">0</span>, where <span class="op">=</span> where2), <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3 

[1 5] 
</code></pre>
</div>
</div>
</section>
<section id="pandas-outros-tipos-de-operações" class="level3" data-number="6.1.6">
<h3 data-number="6.1.6" class="anchored" data-anchor-id="pandas-outros-tipos-de-operações"><span class="header-section-number">6.1.6</span> Pandas: Outros Tipos de Operações</h3>
<div id="cell-131" class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alguns exemplos:</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>tables_links <span class="op">=</span> {</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df1'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table1.csv'</span>,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df2'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table2.csv'</span>,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df3'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table3.csv'</span>,</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df4a'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table4a.csv'</span>,</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df4b'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table4b.csv'</span>,</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df5'</span>: <span class="st">'https://raw.githubusercontent.com/tidyverse/tidyr/c6c126a61f67a10b5ab9ce6bb1d9dbbb7a380bbd/data-raw/table6.csv'</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tables_links.keys():</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">globals</span>()[i] <span class="op">=</span> pd.read_csv(tables_links[i])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="reshape-1" class="level4" data-number="6.1.6.1">
<h4 data-number="6.1.6.1" class="anchored" data-anchor-id="reshape-1"><span class="header-section-number">6.1.6.1</span> Reshape</h4>
<!-- Mais informaçõa -->
<p>Wide to long (melt):</p>
<div id="cell-134" class="cell" data-outputid="24e21979-d9d7-42b6-a5d7-801338828ab0">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df4a)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>pd.melt(df4a, id_vars <span class="op">=</span> [<span class="st">"country"</span>], var_name <span class="op">=</span> <span class="st">"year"</span>, value_name <span class="op">=</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country    1999    2000
0  Afghanistan     745    2666
1       Brazil   37737   80488
2        China  212258  213766</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="154">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Afghanistan</td>
<td>1999</td>
<td>745</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Brazil</td>
<td>1999</td>
<td>37737</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>China</td>
<td>1999</td>
<td>212258</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Afghanistan</td>
<td>2000</td>
<td>2666</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Brazil</td>
<td>2000</td>
<td>80488</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>China</td>
<td>2000</td>
<td>213766</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Long to wide (pivot)</p>
<div id="cell-136" class="cell" data-outputid="eb34520e-b2d7-46b8-b424-5d529cc3a741">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>pd.pivot(df2, index <span class="op">=</span> [<span class="st">"country"</span>, <span class="st">"year"</span>], columns <span class="op">=</span> <span class="st">"type"</span>, values <span class="op">=</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        country  year        type       count
0   Afghanistan  1999       cases         745
1   Afghanistan  1999  population    19987071
2   Afghanistan  2000       cases        2666
3   Afghanistan  2000  population    20595360
4        Brazil  1999       cases       37737
5        Brazil  1999  population   172006362
6        Brazil  2000       cases       80488
7        Brazil  2000  population   174504898
8         China  1999       cases      212258
9         China  1999  population  1272915272
10        China  2000       cases      213766
11        China  2000  population  1280428583</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="155">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">cases</th>
<th data-quarto-table-cell-role="th">population</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">country</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">Afghanistan</td>
<td data-quarto-table-cell-role="th">1999</td>
<td>745</td>
<td>19987071</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000</td>
<td>2666</td>
<td>20595360</td>
</tr>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">Brazil</td>
<td data-quarto-table-cell-role="th">1999</td>
<td>37737</td>
<td>172006362</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000</td>
<td>80488</td>
<td>174504898</td>
</tr>
<tr class="odd">
<td rowspan="2" data-quarto-table-cell-role="th" data-valign="top">China</td>
<td data-quarto-table-cell-role="th">1999</td>
<td>212258</td>
<td>1272915272</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000</td>
<td>213766</td>
<td>1280428583</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="separate-e-unite" class="level4" data-number="6.1.6.2">
<h4 data-number="6.1.6.2" class="anchored" data-anchor-id="separate-e-unite"><span class="header-section-number">6.1.6.2</span> Separate e Unite</h4>
<p>Separar:</p>
<div id="cell-139" class="cell" data-outputid="7095e576-b29d-4fe6-926c-b353abe3b78e">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>df3[[<span class="st">"cases"</span>, <span class="st">"population"</span>]] <span class="op">=</span> df3[<span class="st">"rate"</span>].<span class="bu">str</span>.split(<span class="st">"/"</span>, expand <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df3.drop(<span class="st">"rate"</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country  year               rate
0  Afghanistan  1999       745/19987071
1  Afghanistan  2000      2666/20595360
2       Brazil  1999    37737/172006362
3       Brazil  2000    80488/174504898
4        China  1999  212258/1272915272
5        China  2000  213766/1280428583 

       country  year   cases  population
0  Afghanistan  1999     745    19987071
1  Afghanistan  2000    2666    20595360
2       Brazil  1999   37737   172006362
3       Brazil  2000   80488   174504898
4        China  1999  212258  1272915272
5        China  2000  213766  1280428583</code></pre>
</div>
</div>
<p>Unir:</p>
<div id="cell-141" class="cell" data-outputid="6aa98d9e-f932-4d3f-c2b9-4aab98432e1f">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df5, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>df5[<span class="st">"year"</span>] <span class="op">=</span> df5[<span class="st">"century"</span>] <span class="op">+</span> df5[<span class="st">"year"</span>]</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>df5 <span class="op">=</span> df5.drop(<span class="st">"century"</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       country  century  year               rate
0  Afghanistan       19    99       745/19987071
1  Afghanistan       20     0      2666/20595360
2       Brazil       19    99    37737/172006362
3       Brazil       20     0    80488/174504898
4        China       19    99  212258/1272915272
5        China       20     0  213766/1280428583 

       country  year               rate
0  Afghanistan   118       745/19987071
1  Afghanistan    20      2666/20595360
2       Brazil   118    37737/172006362
3       Brazil    20    80488/174504898
4        China   118  212258/1272915272
5        China    20  213766/1280428583</code></pre>
</div>
</div>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/gvcode\.github\.io\/trainee\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./aula2-python2.html" class="pagination-link" aria-label="Introdução ao Python II">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introdução ao Python II</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./aula4-cd-manipulacao.html" class="pagination-link" aria-label="CD: Manipulação">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">CD: Manipulação</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>